{"ast":null,"code":"var _jsxFileName = \"/Users/alexeiaccio/Github/next-ts/pages/index.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// import { useQuery } from '@apollo/react-hooks'\n// import { NetworkStatus } from 'apollo-client'\nimport gql from 'graphql-tag';\nimport { get } from 'lodash'; // import { RichText } from 'prismic-reactjs';\n\nimport { withApollo } from '../lib/apollo';\nimport Header from '../components/header';\nexport const PAGE_QUERY = gql`\n query pageQuery($uid: String!, $lang: String!) {\n  page(uid: $uid, lang: $lang) {\n    title\n    body {\n      ...on PageBodyWorks {\n        fields {\n          work {\n            __typename\n            ...on Work {\n              title\n              theme\n            }\n          }\n        }\n      }\n    }\n  }\n}\n`;\n\nconst Index = ({\n  title = '',\n  body = []\n}) => {\n  // const { data } = useQuery(ABOUT_QUERY)\n  // const title = get(data, 'allAbouts.edges.0.node.title.0.text', '') as string;\n  console.log(body);\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, __jsx(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }), __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, title), body.map(({\n    fields\n  }) => {\n    fields.map(({\n      work,\n      __typename\n    }) => {\n      if (__typename === 'PageBodyWorksFields') {\n        return __jsx(\"div\", {\n          key: get(work, 'theme'),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, get(work, 'title.text'));\n      }\n    });\n  }));\n};\n\nIndex.getInitialProps = async ({\n  apolloClient\n}) => {\n  const {\n    data\n  } = await apolloClient.query({\n    query: PAGE_QUERY,\n    variables: {\n      uid: 'index',\n      lang: 'ru'\n    }\n  });\n  const title = get(data, 'page.title.0.text', '');\n  const body = get(data, 'page.body', []);\n  return {\n    title,\n    body\n  };\n};\n\nexport default withApollo(Index);","map":{"version":3,"sources":["/Users/alexeiaccio/Github/next-ts/pages/index.tsx"],"names":["gql","get","withApollo","Header","PAGE_QUERY","Index","title","body","console","log","map","fields","work","__typename","getInitialProps","apolloClient","data","query","variables","uid","lang"],"mappings":";;;AACA;AACA;AACA,OAAOA,GAAP,MAAgB,aAAhB;AACA,SAASC,GAAT,QAAoB,QAApB,C,CACA;;AAEA,SAASC,UAAT,QAA2B,eAA3B;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AAEA,OAAO,MAAMC,UAAU,GAAGJ,GAAI;;;;;;;;;;;;;;;;;;;CAAvB;;AAqBP,MAAMK,KAAgD,GAAG,CAAC;AAAEC,EAAAA,KAAK,GAAG,EAAV;AAAcC,EAAAA,IAAI,GAAG;AAArB,CAAD,KAA+B;AACtF;AAEA;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACL,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADK,EAEL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,KAAL,CAFK,EAGJC,IAAI,CAACG,GAAL,CAAS,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAgB;AACxBA,IAAAA,MAAM,CAACD,GAAP,CAAW,CAAC;AAAEE,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAD,KAAgE;AACzE,UAAIA,UAAU,KAAK,qBAAnB,EAA0C;AACxC,eAAO;AAAK,UAAA,GAAG,EAAEZ,GAAG,CAACW,IAAD,EAAO,OAAP,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACJX,GAAG,CAACW,IAAD,EAAO,YAAP,CADC,CAAP;AAGD;AACF,KAND;AAOD,GARA,CAHI,CAAP;AAaD,CAnBD;;AAqBAP,KAAK,CAACS,eAAN,GAAwB,OAAO;AAAEC,EAAAA;AAAF,CAAP,KAAiC;AACvD,QAAM;AAAEC,IAAAA;AAAF,MAAW,MAAMD,YAAY,CAACE,KAAb,CAAmB;AACxCA,IAAAA,KAAK,EAAEb,UADiC;AAExCc,IAAAA,SAAS,EAAE;AAAEC,MAAAA,GAAG,EAAE,OAAP;AAAgBC,MAAAA,IAAI,EAAE;AAAtB;AAF6B,GAAnB,CAAvB;AAKA,QAAMd,KAAK,GAAGL,GAAG,CAACe,IAAD,EAAO,mBAAP,EAA4B,EAA5B,CAAjB;AACA,QAAMT,IAAI,GAAGN,GAAG,CAACe,IAAD,EAAO,WAAP,EAAoB,EAApB,CAAhB;AAEA,SAAO;AAAEV,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAP;AACD,CAVD;;AAYA,eAAeL,UAAU,CAACG,KAAD,CAAzB","sourcesContent":["import { NextPage } from 'next';\n// import { useQuery } from '@apollo/react-hooks'\n// import { NetworkStatus } from 'apollo-client'\nimport gql from 'graphql-tag'\nimport { get } from 'lodash';\n// import { RichText } from 'prismic-reactjs';\n\nimport { withApollo } from '../lib/apollo';\nimport Header from '../components/header';\n\nexport const PAGE_QUERY = gql`\n query pageQuery($uid: String!, $lang: String!) {\n  page(uid: $uid, lang: $lang) {\n    title\n    body {\n      ...on PageBodyWorks {\n        fields {\n          work {\n            __typename\n            ...on Work {\n              title\n              theme\n            }\n          }\n        }\n      }\n    }\n  }\n}\n`;\n\nconst Index: NextPage<{ title?: string, body: any[] }> = ({ title = '', body = [] }) => {\n  // const { data } = useQuery(ABOUT_QUERY)\n\n  // const title = get(data, 'allAbouts.edges.0.node.title.0.text', '') as string;\n\n  console.log(body)\n  return <div>\n    <Header />\n    <h1>{title}</h1>\n    {body.map(({ fields }) => {\n      fields.map(({ work, __typename }: { work: object, __typename: string }) => {\n        if (__typename === 'PageBodyWorksFields') {\n          return <div key={get(work, 'theme')}>\n            {get(work, 'title.text')}\n          </div>\n        }\n      })\n    })}\n  </div>;\n};\n\nIndex.getInitialProps = async ({ apolloClient }: any) => {\n  const { data } = await apolloClient.query({\n    query: PAGE_QUERY,\n    variables: { uid: 'index', lang: 'ru' }\n  })\n\n  const title = get(data, 'page.title.0.text', '') as string;\n  const body = get(data, 'page.body', []) as any[];\n\n  return { title, body };\n};\n\nexport default withApollo(Index);"]},"metadata":{},"sourceType":"module"}